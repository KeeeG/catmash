<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script type="text/javascript">
    function getAll(){
        const url='https://22ygqfaki5.execute-api.us-east-1.amazonaws.com/default/getAllVotes';
        var req = new XMLHttpRequest();
        req.responseType = 'json';
        req.open('GET', url, true);
        req.onload  = function() {
            var jsonResponse = req.response;
            // do something with jsonResponse
            for (var i = req.response.CatsElections.length - 1; i >= 0; i--){
                var table = document.getElementById("table");
                var row = table.insertRow(0);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                cell1.innerHTML = req.response.CatsElections[i].cat_id;
                cell2.innerHTML = req.response.CatsElections[i].votes;
                cell3.innerHTML="<img src='"+req.response.CatsElections[i].url+"' width='150px' height='80px'>";
            }
        };
        req.send(null);
    }
    </script>
  </head>
  <body onload="getAll()">
    <a href="voting.html" class="button3">Vote here =></a>
    <div class="table-users">
      <div class="header">Users</div>
      <table cellspacing="0" id="table">
        <tr>
          <th>Cat ID</th>
          <th>Votes</th>
          <th>Pic !</th>
        </tr>
      </body>
    </html>